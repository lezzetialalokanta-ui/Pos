<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Lezzet-i Ala POS PRO</title>
<meta name="viewport" content="width=1920">
<style>
body{margin:0;font-family:Segoe UI;background:#0f172a;color:white}
.container{display:grid;grid-template-columns:300px 1fr 420px;height:100vh}

/* MENU */
.left{background:#111827;padding:10px;overflow:auto}
.category{color:#facc15;font-size:20px;margin-top:10px}
.product{background:#1f2937;padding:12px;margin:6px 0;border-radius:8px;cursor:pointer}
.product:hover{background:#374151}

/* TABLES */
.middle{padding:10px}
.table{background:#1e40af;padding:18px;margin:8px;border-radius:10px;display:inline-block;font-size:18px;cursor:pointer}
.table.active{background:#22c55e}

/* CART */
.right{background:#111827;padding:10px;display:flex;flex-direction:column}
.cartItem{background:#1f2937;padding:10px;margin:5px 0;border-radius:6px}
.btn{padding:6px;border:none;border-radius:6px;font-size:15px;margin:2px;cursor:pointer}
.plus{background:#22c55e}
.minus{background:#ef4444}
.pay{background:#facc15;color:black;font-size:20px}
.clear{background:#374151}
.total{font-size:26px;color:#facc15;margin-top:auto}

/* ADMIN */
.admin{position:fixed;top:0;right:0;background:#020617;width:420px;height:100%;padding:10px;overflow:auto;border-left:2px solid #1f2937}
input,select{padding:6px;margin:3px;width:95%}
.editBox{background:#1f2937;padding:6px;margin:5px;border-radius:6px}
</style>
</head>
<body>

<div class="container">

<div class="left" id="menu"></div>

<div class="middle">
<h2>Masalar</h2>
<div id="tables"></div>
</div>

<div class="right">
<h2>Adisyon</h2>
<div id="cart"></div>
<div class="total">Toplam: <span id="total">0</span> ‚Ç∫</div>
<button class="btn pay" onclick="pay()">üí∞ √ñdeme Al</button>
<button class="btn clear" onclick="clearTable()">üóëÔ∏è Masayƒ± Temizle</button>
</div>

</div>

<!-- Y√ñNETƒ∞M PANELƒ∞ -->
<div class="admin">
<h2>‚öôÔ∏è POS Y√∂netim Paneli</h2>

<h3>‚ûï Kategori Ekle</h3>
<input id="catName" placeholder="Kategori adƒ±">
<button onclick="addCategory()">Ekle</button>

<h3>‚ûï √úr√ºn Ekle</h3>
<input id="prodName" placeholder="√úr√ºn adƒ±">
<input id="prodPrice" placeholder="Fiyat">
<select id="prodCat"></select>
<button onclick="addProductAdmin()">Ekle</button>

<h3>‚úèÔ∏è √úr√ºn / Kategori D√ºzenle</h3>
<div id="adminList"></div>

</div>

<script>
// === DATA ===
let categories = JSON.parse(localStorage.getItem("categories")) || {
 "Izgara":[{name:"K√∂fte",price:120},{name:"Kokore√ß",price:150}],
 "ƒ∞√ßecek":[{name:"Ayran",price:20},{name:"Kola",price:30}],
 "Tatlƒ±":[{name:"S√ºtla√ß",price:60}]
};

// SAVE
function save(){localStorage.setItem("categories",JSON.stringify(categories));}

// MENU RENDER
function renderMenu(){
 let menu=document.getElementById("menu");
 let sel=document.getElementById("prodCat");
 let admin=document.getElementById("adminList");
 menu.innerHTML=""; sel.innerHTML=""; admin.innerHTML="";

 for(let c in categories){
  sel.innerHTML+=`<option>${c}</option>`;
  menu.innerHTML+=`<div class="category">${c}</div>`;
  categories[c].forEach((p,i)=>{
   menu.innerHTML+=`<div class="product" onclick="addProduct('${p.name}',${p.price})">${p.name} - ${p.price}‚Ç∫</div>`;
   admin.innerHTML+=`
   <div class="editBox">
   <b>${c}</b><br>
   <input value="${p.name}" onchange="editProductName('${c}',${i},this.value)">
   <input value="${p.price}" onchange="editProductPrice('${c}',${i},this.value)">
   <button onclick="delProduct('${c}',${i})">‚ùå Sil</button>
   </div>`;
  });
  admin.innerHTML+=`<div class="editBox"><b>${c}</b> <button onclick="delCategory('${c}')">Kategori Sil</button></div>`;
 }
}
renderMenu();

// CATEGORY ADD
function addCategory(){
 let n=catName.value;
 if(!n) return;
 categories[n]=[];
 save();renderMenu();
}

// PRODUCT ADD
function addProductAdmin(){
 let n=prodName.value;
 let p=parseFloat(prodPrice.value);
 let c=prodCat.value;
 if(!n||!p) return;
 categories[c].push({name:n,price:p});
 save();renderMenu();
}

// EDIT PRODUCT
function editProductName(c,i,val){categories[c][i].name=val; save();renderMenu();}
function editProductPrice(c,i,val){categories[c][i].price=parseFloat(val); save();renderMenu();}

// DELETE
function delProduct(c,i){categories[c].splice(i,1); save();renderMenu();}
function delCategory(c){delete categories[c]; save();renderMenu();}

// === TABLE SYSTEM ===
let tables={},currentTable="Masa1";
for(let i=1;i<=15;i++){
 tables["Masa"+i]={cart:{}};
 let d=document.createElement("div");
 d.className="table";
 d.innerText="Masa "+i;
 d.onclick=()=>selectTable("Masa"+i,d);
 document.getElementById("tables").appendChild(d);
}
function selectTable(n,el){
 currentTable=n;
 document.querySelectorAll(".table").forEach(t=>t.classList.remove("active"));
 el.classList.add("active");
 renderCart();
}
document.querySelector(".table").click();

// CART
function addProduct(n,p){
 let cart=tables[currentTable].cart;
 if(!cart[n]) cart[n]={qty:0,price:p};
 cart[n].qty++;
 renderCart();
}
function change(n,v){
 let cart=tables[currentTable].cart;
 cart[n].qty+=v;
 if(cart[n].qty<=0) delete cart[n];
 renderCart();
}
function renderCart(){
 let cart=tables[currentTable].cart;
 let html="",total=0;
 for(let k in cart){
  let i=cart[k];
  total+=i.qty*i.price;
  html+=`<div class='cartItem'>${k} x${i.qty} = ${i.qty*i.price}‚Ç∫ 
  <button class='btn plus' onclick="change('${k}',1)">+</button>
  <button class='btn minus' onclick="change('${k}',-1)">-</button></div>`;
 }
 cart.innerHTML=html;
 totalEl.innerText=total;
}
let cart=document.getElementById("cart");
let totalEl=document.getElementById("total");

// SALES
let history=JSON.parse(localStorage.getItem("sales"))||[];
function pay(){
 let total=totalEl.innerText;
 history.push({masa:currentTable,total,date:new Date().toLocaleString()});
 localStorage.setItem("sales",JSON.stringify(history));
 alert("√ñdeme alƒ±ndƒ± ‚úî");
 tables[currentTable].cart={};
 renderCart();
}
function clearTable(){tables[currentTable].cart={};renderCart();}
</script>

</body>
</html>
